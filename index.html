<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SBDStudio</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <header class="app-header">
        <div class="profile-section">
            <img src="img/avatar.jpg" alt="Profile" class="profile-avatar">
        </div>
        <button class="create-button">ï¼‹ Create</button>
    </header>

    <main id="boardList" class="board-grid">
      <div class="board-thumbnail" style="background-image: url('${board.thumbnail}')"></div>
    </main>
    <script>
      fetch("/api/boards")
        .then(res => res.json())
        .then(data => {
          const list = document.getElementById("boardList");
          list.innerHTML = "";
          if (data.length === 0) {
            list.innerHTML = "<p style='padding: 32px;'>No boards yet. Click ï¼‹ Create to begin.</p>";
            return;
          }
          data.forEach(board => {
            const card = document.createElement("div");
            card.className = "board-card";

            const link = document.createElement("a");
            link.href = `board.html?id=${board.id}`;
            link.innerHTML = `
              <div class="board-title">${board.title}</div>
              <div class="board-meta">${new Date(board.updated).toLocaleString()}</div>
            `;

            const deleteBtn = document.createElement("button");
            deleteBtn.textContent = "ðŸ—‘ï¸";
            deleteBtn.className = "delete-btn";
            deleteBtn.addEventListener("click", (e) => {
              e.stopPropagation();
              e.preventDefault();
              if (confirm(`Delete board "${board.title}"?`)) {
                fetch(`/api/boards/${board.id}`, { method: "DELETE" })
                  .then(() => location.reload());
              }
            });

            card.appendChild(link);
            card.appendChild(deleteBtn);
            list.appendChild(card);
          });
        });
    </script>
    
</body>
</html>